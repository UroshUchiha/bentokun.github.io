<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>

<head>
<meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>Note Example</title>
<link href="style.css" rel="stylesheet" type="text/css">
</head>

<table border="0" width="100%" height="8" bgcolor="#eeeeee">
<tr> <td width="100%" height="1"><b><font size="2" color="#000000" face="Arial, Helvetica, sans-serif"><strong><a name=Top></a>
S60 5th Edition SDK </strong></font></b><br><i>Example Applications Guide</i></td></tr> </table>
<!-- Generated by Doxygen 1.4.5 -->
<div class="tabs">
  <ul>
    <li id="current"><a href="index.html"><span>Main&nbsp;Page</span></a></li>
    <li><a href="annotated.html"><span>Classes</span></a></li>
    <li><a href="files.html"><span>Files</span></a></li>
  </ul></div>
<h1>Note Example</h1>
<p>
<a class="el" href="index.html#Intro_sec">1. About this Example</a> <br>
<a class="el" href="index.html#UI_sec">2. User Interface</a> <br>
<a class="el" href="index.html#Design_sec">3. Design and implementation</a><p>
<hr>
<h2><a class="anchor" name="Intro_sec">
1. About this Example</a></h2>
This tutorial explains how to use the note control for Avkon applications. The note control is used to show a dialog that calls the user's attention to something or to explain a situation.<p>
In the note example application, the following functions are introduced:<p>
<ul>
<li>Error note</li><li>Wait note</li><li>Dynamic text note</li><li>Progress note</li><li>Global note</li></ul>
<p>
Typical uses of the note control are:<p>
<ul>
<li>Warning message when an error occurs</li><li>Warning message about battery consumption</li></ul>
<h3><a class="anchor" name="Sub11">
1.1 APIs demonstrated</a></h3>
The following UML diagram shows key classes of the note example application.<p>
<div align="center">
<img src="image_note001.gif" alt="image_note001.gif">
</div>
<p>
<hr>
<h3><a class="anchor" name="Sub12">
1.2 Prerequisites</a></h3>
The Note example application shows how to use note controls in the application. In particular, an understanding of the following topics is important to use the note controls:<p>
<ul>
<li>Defining the resources</li><li>Implementing functions to deal with note controls</li><li>Classes that are related to the note control</li></ul>
<p>
<hr>
<h2><a class="anchor" name="UI_sec">
2. User Interface</a></h2>
This section shows how the note controls are displayed to users and explains how to operate them in the note example application.<h3><a class="anchor" name="Sub21">
2.1 Initial view</a></h3>
The initial view is displayed immediately after the note example application launches.<p>
<div align="center">
<img src="image_note002.gif" alt="image_note002.gif">
</div>
<h3><a class="anchor" name="Sub22">
2.2 Options menu</a></h3>
You can change screens as you want using the <b>Options</b> menu. To open the <b>Options</b> menu, press the left soft key (<b>Options</b>) when no dialog is displayed.<p>
<div align="center">
<img src="image_note029.gif" alt="image_note029.gif">
</div>
<p>
The following are the commands on the <b>Options</b> menu:<p>
<table border="1" cellspacing="3" cellpadding="3">
<tr>
<td><b>Menu</b> <p>
</td><td><b>Examples to be shown</b> </td></tr>
<tr>
<td>Error note </td><td>Shows the error note example (See <a class="el" href="index.html#Sub231">section 2.3.1, Error note</a>). </td></tr>
<tr>
<td>Wait note </td><td>Shows the wait note example (See <a class="el" href="index.html#Sub24">section 2.4, Wait note</a>). </td></tr>
<tr>
<td>Dynamic text </td><td>Shows the example of the note with dynamic text (See <a class="el" href="index.html#Sub251">section 2.5.1, Dynamic text</a>). </td></tr>
<tr>
<td>Progress note </td><td>Shows the progress note example (See <a class="el" href="index.html#Sub26">section 2.6, Progress note</a>). </td></tr>
<tr>
<td>Global Confirmation note </td><td>Shows the Global confirmation note example (See <a class="el" href="index.html#Sub271">section 2.7.1, Global confirmation note</a>). </td></tr>
<tr>
<td>Exit </td><td>Ends the application. </td></tr>
</table>
<h3><a class="anchor" name="Sub23">
2.3 Note dialog</a></h3>
In order to use a base note dialog, it is necessary to specify resource data such as image and text. (For more details, see section 5.)<h3><a class="anchor" name="Sub231">
2.3.1 Error note</a></h3>
To display an Error note dialog , press the right soft key (<b>Next</b>) when the initial view (see figure 2) is displayed.<p>
The Error note dialog disappears (right screen in the following figure) when you press any key or after waiting for a given number of seconds.<p>
<div align="center">
<img src="image_note003.gif" alt="image_note003.gif">
</div>
<h3><a class="anchor" name="Sub24">
2.4 Wait note</a></h3>
To display a Wait note dialog, press the right soft key (<b>Next</b>) after the Error note dialog disappears.<p>
The Wait note dialog disappears when you press the right soft key (<b>Cancel</b>).<p>
<div align="center">
<img src="image_note008.gif" alt="image_note008.gif">
</div>
<h3><a class="anchor" name="Sub25">
2.5 Displaying text</a></h3>
<h3><a class="anchor" name="Sub251">
2.5.1 Dynamic text</a></h3>
To display a note dialog with dynamic text, press the right soft key (<b>Next</b>) after the Wait note disappears. In this example, the number in the text string changes. This dialog disappears when you press any key or after waiting for a given number of seconds.<p>
<div align="center">
<img src="image_note010.gif" alt="image_note010.gif">
</div>
<h3><a class="anchor" name="Sub26">
2.6 Progress note</a></h3>
To display a Progress note dialog, press the right soft key (<b>Next</b>) after the note dialog with dynamic text disappears. A progress note is used to show the status of operation in progress.<p>
This dialog disappears when you press the right soft key (<b>Cancel</b>) or when the progress bar reaches its maximum point.<p>
<div align="center">
<img src="image_note015.gif" alt="image_note015.gif">
</div>
<h3><a class="anchor" name="Sub27">
2.7 Global note dialog</a></h3>
A global note dialog remains on top when the application changes. It also has its own resource data. Therefore, it can be used only by specifying a text to be displayed and a note type. (For more details, see section 3.)<h3><a class="anchor" name="Sub271">
2.7.1 Global confirmation note</a></h3>
To display a Global confirmation note dialog, press the right soft key (<b>Next</b>) after the Progress note dialog disappears. The Global confirmation note dialog disappears when you press any key or after waiting for a given number of seconds.<p>
<div align="center">
<img src="image_note020.gif" alt="image_note020.gif">
</div>
<h2><a class="anchor" name="Design_sec">
3. Design and implementation</a></h2>
<h3><a class="anchor" name="Sub31">
3.1 Resource definition of note classes</a></h3>
All structures for note classes are defined in "avkon.rh". It is necessary to define resource data in an .rss file using the AVKON_NOTE structure. For example, an error note dialog is defined like this:<p>
<div class="fragment"><pre class="fragment"> RESOURCE DIALOG r_aknexnote_error_note
     {
     flags = EAknErrorNoteFlags;
     items =
         {
         DLG_LINE
             {
             type = EAknCtNote;
             <span class="keywordtype">id</span> = EAknExNoteCtrlIdErrorNote;
             control = AVKON_NOTE
                 {
                 layout = EGeneralLayout;
                 singular_label = STRING_r_exnt_error_singular;
                 plural_label = STRING_r_exnt_error_plural;
                 imagefile = AKNEXNOTE_BMPFILE_NAME;
                 imageid = EMbmAknexnoteAknexnoteerroricon;
                 };
             }
         };
     }
</pre></div><h3><a class="anchor" name="Sub32">
3.2 Constructing a note control</a></h3>
This section explains the method of note control construction.<h3><a class="anchor" name="Sub321">
3.2.1 Note dialog</a></h3>
The method of note dialog construction is almost the same as that of a standard dialog. However, the process differs depending on the message type (static or dynamic).<p>
In the case of a static message, a dialog is first created and then the ExecuteDlgLD function is called.<p>
<div class="fragment"><pre class="fragment"> <span class="comment">// Create CAknNoteDialog instance</span>
 CAknNoteDialog* dlg = <span class="keyword">new</span> ( ELeave ) CAknNoteDialog( aTone, aTimeout );
 
 dlg-&gt;PrepareLC( aResourceId );
 dlg-&gt;SetTextPluralityL( aPlural );
 
 <span class="comment">// Show the Dialog</span>
 dlg-&gt;RunLD();
</pre></div><p>
<div align="center">
<img src="image_note033.gif" alt="image_note033.gif">
</div>
<p>
In the case of a dynamic message, a dialog is first created and the resource data is specified using the PrepareLC function.<p>
Then RunDlgLD is called after setting the changeable part of data and the dialog is displayed.<p>
<div class="fragment"><pre class="fragment"> <span class="comment">// Create CAknNoteDialog instance</span>
 CAknNoteDialog* dlg = <span class="keyword">new</span> ( ELeave ) CAknNoteDialog( 
                                      CAknNoteDialog::EConfirmationTone, 
                                      CAknNoteDialog::ELongTimeout );
 
 dlg-&gt;PrepareLC( R_AKNEXNOTE_DYNAMIC_TEXT );
 TTime theTime( KAknExNoteInitializeTime );
 theTime.UniversalTime();
 TInt64 randSeed( theTime.Int64() );
 TInt number( Math::Rand( randSeed ) % KAknExNoteRandomNumberRange );
 dlg-&gt;SetTextPluralityL( EFalse );
 dlg-&gt;SetTextNumberL( number );
 
 <span class="comment">// Show the Dialog</span>
 dlg-&gt;RunLD();
</pre></div><h3><a class="anchor" name="Sub322">
3.2.2 Global note</a></h3>
The construction of a global note does not need dialog resource data. In order to display a dialog, the NewL function is first called to instantiate an object, then the ShowNoteL function is called.<p>
<div class="fragment"><pre class="fragment"> <span class="comment">//Allocate TBuf with constant length.</span>
 TBuf&lt;KAknExNoteTextBufLength&gt; text( NULL );
 
 <span class="comment">// Reads a resource into a descriptor.</span>
 CEikonEnv::Static()-&gt;ReadResource( text, aResourceId );
 
 TPtrC noteText( text );
 
 <span class="comment">// Create new CAknGlobalNote instance.</span>
 CAknGlobalNote* globalNote = CAknGlobalNote::NewL();
 
 <span class="comment">// Push CAknGlobalNote's pointer to CleanupStack</span>
 CleanupStack::PushL( globalNote );
 
 iPermanentNoteId = globalNote-&gt;ShowNoteL( aType, noteText );
 
 <span class="comment">// Pop and Destroy CAknGlobalNote's pointer from CleanupStack</span>
 CleanupStack::PopAndDestroy();
</pre></div><p>
<div align="center">
<img src="image_note034.gif" alt="image_note034.gif">
</div>
 <hr>

<table x-use-null-cells
		style="x-cell-content-align: top;
				width: 100%;
				border-spacing: 0px;
				border-spacing: 0px;"
		cellspacing=0
		width=100%>
  <col style="width: 50%;">
  <col style="width: 50%;">

  <tr style="x-cell-content-align: top;"
	valign=top>
  <td style="width: 50%;
			padding-right: 10px;
			padding-left: 10px;
			border-right-style: None;
			border-left-style: None;
			border-top-style: None;
			border-bottom-style: None;"
	width=50%>
  <p style="font-family: Arial;"><small style="font-size: smaller;">© Nokia 2009</small></td>
  <td style="width: 50%;
			padding-right: 10px;
			padding-left: 10px;
			border-top-style: None;
			border-bottom-style: None;
			border-right-style: None;"
	width=50%>
  <p style="text-align: right; margin-right: -4px;"
	align=right><span style="font-weight: bold;"><a href="#Top"
													title="Back to top"><img
 src="top.gif"
	x-maintain-ratio=TRUE
	alt="Back to top"
	style="border: none;
			width: 18px;
			height: 15px;
			float: none;
			border-style: none;
			border-style: none;"
	width=18
	height=15
	border=0></a></span></td></tr>
 </table>
</body>
</html>

